(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6814:(e,t,r)=>{Promise.resolve().then(r.bind(r,1431))},1431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var n=r(5155),a=r(2115),s=r(4338);let o=(0,r(5974).UU)("https://xpxdoaggoqigdzsxgesi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhweGRvYWdnb3FpZ2R6c3hnZXNpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk4ODAxOTEsImV4cCI6MjA1NTQ1NjE5MX0.oElzNaKQn4KWsrlgDzPmSUFnSI4waIOLs4HuQQsZe48");var i=r(3760),l=r(2645),c=r(2488),d=r(7193),u=r(3463),m=r(9795);function b(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,m.QP)((0,u.$)(t))}let p=i.bL,f=i.YJ,x=i.WT,h=a.forwardRef((e,t)=>{let{className:r,children:a,...s}=e;return(0,n.jsxs)(i.l9,{ref:t,className:b("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...s,children:[a,(0,n.jsx)(i.In,{asChild:!0,children:(0,n.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=i.l9.displayName;let w=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(i.PP,{ref:t,className:b("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(c.A,{className:"h-4 w-4"})})});w.displayName=i.PP.displayName;let j=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(i.wn,{ref:t,className:b("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(l.A,{className:"h-4 w-4"})})});j.displayName=i.wn.displayName;let g=a.forwardRef((e,t)=>{let{className:r,children:a,position:s="popper",...o}=e;return(0,n.jsx)(i.ZL,{children:(0,n.jsxs)(i.UC,{ref:t,className:b("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:s,...o,children:[(0,n.jsx)(w,{}),(0,n.jsx)(i.LM,{className:b("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,n.jsx)(j,{})]})})});g.displayName=i.UC.displayName;let y=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(i.JU,{ref:t,className:b("px-2 py-1.5 text-sm font-semibold",r),...a})});y.displayName=i.JU.displayName;let v=a.forwardRef((e,t)=>{let{className:r,children:a,...s}=e;return(0,n.jsxs)(i.q7,{ref:t,className:b("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...s,children:[(0,n.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(i.VF,{children:(0,n.jsx)(d.A,{className:"h-4 w-4"})})}),(0,n.jsx)(i.p4,{children:a})]})});function k(e){var t;return(null===(t=e.split(";").find(e=>e.includes("userData")))||void 0===t?void 0:t.split("=")[1])||""}async function N(e){if(e){let{data:e}=await o.from("Lockers").select("name");return e}{let e=JSON.parse(k(document.cookie)).userId,{data:t}=await o.from("Contributors").select("access_to").eq("id",e),r=[];for(let e of JSON.parse(t[0].access_to)){let{data:t}=await o.from("Lockers").select("name").eq("id",e);r.push(t[0])}return r}}function C(e){let[t,r]=a.useState([]),s=a.useMemo(()=>t,[t]),[o,i]=a.useState("");return a.useEffect(()=>{(async()=>{let t=await N(e.showAllLockers);t&&(r(t),e.showAllLockers||i(t[0].name))})()},[]),a.useEffect(()=>{e.onLockerChange&&e.onLockerChange(o)},[o]),(0,n.jsxs)(p,{value:o,onValueChange:e=>i(e),children:[(0,n.jsx)(h,{className:"w-full mb-4",children:(0,n.jsx)(x,{placeholder:"Select Locker"})}),(0,n.jsx)(g,{children:(0,n.jsxs)(f,{children:[(0,n.jsx)(y,{children:"Lockers"}),s.map(e=>(0,n.jsx)(v,{value:e.name,children:e.name},e.name))]})})]})}v.displayName=i.q7.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(i.wv,{ref:t,className:b("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=i.wv.displayName;let S=async e=>{let{data:t,error:r}=await o.from("Lockers").select("id").eq("name",e);return{lockerId:t,error:r}},L=async(e,t,r,n)=>{let{error:a}=await o.from("Contributions").insert([{contributor:e,questions:t,answer:r,locker:n}]);return{error:a}},I=async e=>{let{data:t,error:r}=await o.from("Contributions").select().eq("locker",e),n=t,{data:a,error:s}=await o.from("Contributors").select("id, name"),i=e=>{for(let t of a)if(t.id==e)return t.name};return{contributions:n=n.map(e=>({...e,contributor:i(e.contributor)})),error:{...r,...s}}};function A(e){e.reduce((e,t)=>e||t)&&alert("We screwed up")}function _(e){let[t,r]=a.useState({}),s=async r=>{r.preventDefault();let{name:n,locker:a,questions:s,answer:i}=t;if(a&&s&&i){if(e.wannaContribute){let{lockerId:t,error:r}=await S(a),{data:n}=await o.from("Contributors").select("access_to").eq("id",JSON.parse(k(document.cookie)).userId),l=[...new Set([...JSON.parse(n[0].access_to),t[0].id])],{data:c,error:d}=await o.from("Contributors").update([{access_to:JSON.stringify(l)}]).eq("id",JSON.parse(k(document.cookie)).userId).select(),{error:u}=await L(c[0].id,s,i,t[0].id);A([d,r,u]),e.onStatusChange();return}if(!n){alert("Name is mandatory");return}let{lockerId:r,error:l}=await S(a),{data:c,error:d}=await o.from("Contributors").insert([{name:t.name,access_to:"[".concat(r[0].id,"]")}]).select();localStorage.setItem("userId",c[0].id);let{error:u}=await L(c[0].id,s,i,r[0].id);A([d,l,u]),e.onStatusChange()}else alert("All fields are mandatory")};return(0,n.jsxs)("form",{children:[(0,n.jsx)("div",{className:"input-group",children:e.wannaContribute?null:(0,n.jsx)("input",{type:"text",id:"name",className:"curved-input",placeholder:"Your Name",value:t.name||"",onChange:e=>r({...t,name:e.target.value})})}),(0,n.jsx)(C,{showAllLockers:!0,onLockerChange:e=>{r({...t,locker:e})}}),(0,n.jsx)("div",{className:"input-group",children:(0,n.jsx)("textarea",{id:"questions",className:"curved-input",placeholder:"Questions Asked",value:t.questions||"",onChange:e=>r({...t,questions:e.target.value})})}),(0,n.jsx)("div",{className:"input-group",children:(0,n.jsx)("textarea",{id:"answer",className:"curved-input",placeholder:"Answer",value:t.answer||"",onChange:e=>r({...t,answer:e.target.value})})}),(0,n.jsx)("button",{onClick:s,type:"submit",children:"Contribute"}),(0,n.jsx)("style",{children:'\n        .input-group {\n          margin-bottom: 1rem;\n        }\n\n        textarea {\n          resize: none;\n          height: 5em;\n        }\n\n        label {\n          display: block;\n          margin-bottom: 0.5rem;\n          color: #333;\n          font-size: 0.9rem;\n        }\n\n        .curved-input {\n          width: 100%;\n          padding: 0.75rem;\n          font-size: 1rem;\n          color: #333;\n          background-color: #fff;\n          border: none;\n          border-radius: 8px;\n          box-shadow: 0 2px 0 0 #e5e7eb;\n          transition: all 0.3s ease;\n        }\n\n        .curved-input::placeholder {\n          color: #999;\n        }\n\n        .curved-input:focus {\n          outline: none;\n          box-shadow: 0 2px 0 0 #663399;\n        }\n\n        button[type="submit"] {\n          display: block;\n          outline: none;\n          width: 100%;\n          padding: 0.75rem;\n          background-color: #663399;\n          color: #fff;\n          border: none;\n          border-radius: 8px;\n          font-size: 1rem;\n          cursor: pointer;\n          transition: background-color 0.3s ease;\n        }\n\n        button[type="submit"]:hover {\n          background-color: #552b80;\n        }\n      '})]})}function q(){let[e,t]=a.useState(),r=async e=>{if(!e)return;let r=(await S(e)).lockerId;console.log(r,e);let{contributions:n}=await I(r[0].id);t(null==n?void 0:n.map(e=>({contributor:e.contributor,questions:e.questions,answers:e.answer}))),console.log(n)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(C,{onLockerChange:r,showAllLockers:!1}),(0,n.jsx)("div",{className:"table-container",children:(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Contributor"}),(0,n.jsx)("th",{children:"Questions"}),(0,n.jsx)("th",{children:"Answers"})]})}),(0,n.jsxs)("tbody",{children:[null==e?void 0:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.contributor}),(0,n.jsx)("td",{children:e.questions}),(0,n.jsx)("td",{children:e.answers})]},"".concat(e.contributor,"-").concat(Math.random().toString(36).substring(2,8)))),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Alice"}),(0,n.jsx)("td",{children:"What is Newton's First Law?"}),(0,n.jsx)("td",{children:"It states that an object remains at rest..."})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Bob"}),(0,n.jsx)("td",{children:"How to calculate work done?"}),(0,n.jsx)("td",{children:"Work = Force \xd7 Displacement \xd7 cos(Î¸)"})]})]})]})}),(0,n.jsx)("style",{children:"\n        .table-container {\n          width: 100%;\n          margin: 20px auto;\n          border-radius: 10px;\n          overflow-x: scroll;\n          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n          }\n          \n          table {\n            min-width: 528px;\n            width: 100%;\n            border-collapse: collapse;\n        }\n\n        thead {\n            background-color: rebeccapurple; /* Purple header */\n            color: white;\n            text-align: left;\n        }\n\n        th, td {\n            padding: 12px;\n            border-bottom: 1px solid #ddd;\n        }\n\n        tbody tr:hover {\n            background-color: #f3e5f5; /* Light purple hover */\n            cursor: pointer;\n        }\n\n        tbody tr:last-child td {\n            border-bottom: none;\n        }\n      "})]})}var z=r(894),E=r(6045),J=r(507),D=r(2937),O=r(2111),F=r(9313),T=r(1798);function R(e){let[t,r]=a.useState(!1),[s,o]=a.useState("");return a.useEffect(()=>{e.onEntryChange(s)},[s]),(0,n.jsx)("div",{children:(0,n.jsxs)(O.A,{sx:{m:0,width:"100%"},variant:"filled",children:[(0,n.jsx)(J.A,{htmlFor:"filled-adornment-password",children:e.wannaLogin?"Tell us Your Entry Key":"Set Your Entry Key"}),(0,n.jsx)(E.A,{onChange:e=>o(e.target.value),id:"filled-adornment-password",type:t?"text":"password",endAdornment:(0,n.jsx)(D.A,{position:"end",children:(0,n.jsx)(z.A,{"aria-label":t?"hide the password":"display the password",onClick:()=>r(e=>!e),onMouseDown:e=>{e.preventDefault()},onMouseUp:e=>{e.preventDefault()},edge:"end",children:t?(0,n.jsx)(T.A,{}):(0,n.jsx)(F.A,{})})})})]})})}var W=r(9142),M=r(2282),U=r(8803),Y=r.n(U);let P=e=>{let[t,r]=a.useState(["",""]);return a.useEffect(()=>{e.onFavChange(t)},[t]),(0,n.jsxs)("div",{className:"jsx-b4203890938f9bbe",children:[(0,n.jsxs)("div",{className:"jsx-b4203890938f9bbe",children:[(0,n.jsx)("h1",{className:"jsx-b4203890938f9bbe",children:"Your Fav Letter \uD83D\uDE09"}),"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(e=>(0,n.jsx)("div",{onClick:e=>{for(let t of e.currentTarget.parentElement.children)t.classList.remove("active");e.currentTarget.classList.add("active");let t=e.currentTarget.innerText;r(e=>[t,e[1]])},className:"jsx-b4203890938f9bbe pellets",children:e},e))]}),(0,n.jsxs)("div",{className:"jsx-b4203890938f9bbe",children:[(0,n.jsx)("h1",{className:"jsx-b4203890938f9bbe",children:"Your Fav Number \uD83D\uDE09"}),"1234567890".split("").map(e=>(0,n.jsx)("div",{onClick:e=>{for(let t of e.currentTarget.parentElement.children)t.classList.remove("active");e.currentTarget.classList.add("active");let t=e.currentTarget.innerText;r(e=>[e[0],t])},className:"jsx-b4203890938f9bbe pellets",children:e},e))]}),(0,n.jsx)(Y(),{id:"b4203890938f9bbe",children:'.pellets.jsx-b4203890938f9bbe{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-family:"Courier New",Courier,monospace;margin:2px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background-color:aliceblue;color:rebeccapurple;border:1px solid rebeccapurple;font-size:1.5rem;width:2rem;height:2rem;cursor:pointer;-webkit-transition:.3s ease;-moz-transition:.3s ease;-o-transition:.3s ease;transition:.3s ease}div.jsx-b4203890938f9bbe:has(>.pellets){margin:1rem auto;padding:.5rem 1rem;background-color:#f5f5f5;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;max-width:25em;border-top:5px solid rebeccapurple}div.jsx-b4203890938f9bbe:has(>.pellets) h1.jsx-b4203890938f9bbe{font-family:"Courier New",Courier,monospace;font-size:1.5rem;color:black;text-align:center}.pellets.jsx-b4203890938f9bbe:hover,.pellets.active.jsx-b4203890938f9bbe{background-color:rebeccapurple;color:aliceblue;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}'})]})},Q=(0,W.Ay)(M.A)(e=>{let{theme:t}=e;return{color:t.palette.getContrastText("#663399"),backgroundColor:"#663399","&:hover":{backgroundColor:"#683898"}}});function Z(e){let[t,r]=a.useState(["","",""]),s=async()=>{if(""===t[0]){alert(e.wannaLogin?"Enter your entry key":"Set your entry key that you will use to access the locker");return}if(""===t[1]||""===t[2]){alert("So, you won't tell us your fav letter and number? \uD83D\uDE22");return}if(e.wannaLogin){let{data:r,error:n}=await o.from("Contributors").select().eq("entry",t[0]).eq("fav_letter",t[1]).eq("fav_number",t[2]);n?alert("We screwed up!"):r?(document.cookie='userData={"userId" : "'.concat(r[0].id,'", "entry" : "').concat(t[0],'", "fav_letter" : "').concat(t[1],'", "fav_number" : "').concat(t[2],'"}; max-age=88888888; Secure; SameSite=Strict'),e.makeContributor(!0),e.setWannaLogin(!1)):alert("Not a contributor")}else{let r=localStorage.getItem("userId"),{error:n}=await o.from("Contributors").update([{id:r,entry:t[0],fav_letter:t[1],fav_number:t[2]}]).eq("id",r);n?alert("We screwed up!"):(document.cookie='userData={"userId" : "'.concat(r,'", "entry" : "').concat(t[0],'", "fav_letter" : "').concat(t[1],'", "fav_number" : "').concat(t[2],'"}; max-age=88888888; Secure; SameSite=Strict'),e.makeContributor(!0))}};return(0,n.jsxs)("form",{children:[(0,n.jsx)(R,{wannaLogin:e.wannaLogin,onEntryChange:e=>{r(t=>[e,t[1],t[2]])}}),(0,n.jsx)(P,{onFavChange:e=>{r(t=>[t[0],e[0],e[1]])}}),(0,n.jsx)(Q,{onClick:s,className:"submit",children:"Submit"}),(0,n.jsx)("style",{children:"\n        form{\n            display: flex;\n            flex-direction: column;\n        }\n        .submit{\n            align-self: center;\n        }\n      "})]})}var X=r(6854),K=r(8173),V=r.n(K);function B(){let[e,t]=a.useState(!1),[r,i]=a.useState(!1),[l,c]=a.useState(!1),[d,u]=a.useState(!1),m=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){t(!0),i(!1);return}if(document.cookie){let e=JSON.parse(k(document.cookie));if(e.userId&&e.entry&&e.fav_letter&&e.fav_number){let{data:r}=await o.from("Contributors").select().eq("id",e.userId).eq("entry",e.entry).eq("fav_letter",e.fav_letter).eq("fav_number",e.fav_number);r&&(t(!0),i(!1),u(!1))}}},[b,p]=a.useState(!0);return a.useEffect(()=>{(async()=>{await m(),p(!1)})()},[]),(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)(V(),{href:"/",children:(0,n.jsx)("h1",{className:"logo",children:"ZLocker"})}),b?(0,n.jsx)(s.A,{sx:{color:"grey.500"},spacing:2,direction:"row",children:(0,n.jsx)(X.A,{color:"secondary"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"buttonbox",children:e?(0,n.jsx)("button",{className:"mybutton",onClick:()=>{c(!0)},children:"Contribute"}):(0,n.jsx)("button",{className:"mybutton",onClick:()=>u(!0),children:"Access Lockers"})}),r||d?(0,n.jsx)(Z,{wannaLogin:d,setWannaLogin:u,makeContributor:m}):null,(e||r||d)&&!l?null:(0,n.jsx)(_,{wannaContribute:l,onStatusChange:()=>{l?c(!1):i(!0)}}),e&&!l?(0,n.jsx)(q,{}):null]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[804,441,517,358],()=>t(6814)),_N_E=e.O()}]);